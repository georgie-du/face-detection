(this["webpackJsonpface-detection-app"]=this["webpackJsonpface-detection-app"]||[]).push([[0],{264:function(e,t,n){},266:function(e,t,n){},280:function(e,t){},281:function(e,t){},289:function(e,t){},299:function(e,t){},300:function(e,t){},301:function(e,t){},302:function(e,t){},310:function(e,t){},313:function(e,t,n){"use strict";n.r(t);var r=n(63),c=n.n(r),a=n(236),s=n.n(a),i=(n(264),n(19)),o=n(4),u=n.n(o),l=n(11),d=n(5),b=(n(266),n(237)),f=(n(312),n(49));var j=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],a=Object(r.useRef)(null),s=Object(r.useRef)(null),o=Object(r.useRef)(null),j=Object(r.useRef)(!1),p=Object(r.useRef)(null),h=Object(r.useRef)(!1),m=Object(r.useRef)([]),g=Object(r.useRef)(null);function x(){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j.current){e.next=3;break}return w(),e.abrupt("return");case 3:return e.next=5,p.current.detect(a.current);case 5:for(t=e.sent,n=!1,r=0;r<t.length;r++)"person"===t[r].class&&(n=!0,console.log(t[r]));n?(O(),m.current.push(!0)):m.current.filter(Boolean).length?(O(),m.current.push(!1)):w(),console.log(m.current),m.current=m.current.slice(Math.max(m.current.length-9,0)),requestAnimationFrame((function(){x()}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){h.current||(h.current=!0,console.log("start recording"),g.current=new MediaRecorder(window.stream),g.current.ondataavailable=function(e){var t=(new Date).toUTCString();console.log(t);var n=URL.createObjectURL(e.data);console.log(n),c((function(e){return[].concat(Object(i.a)(e),[{href:n,dateTitle:t}])}))},g.current.start())}function w(){h.current&&(h.current=!1,g.current.stop(),console.log("stopped recording"),m.current=[])}return Object(r.useEffect)((function(){function e(){return(e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.current.setAttribute("disabled",!0),o.current.setAttribute("disabled",!0),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){e.next=19;break}return e.prev=3,e.next=6,navigator.mediaDevices.getUserMedia({audio:!0,video:!0});case 6:return t=e.sent,window.stream=t,a.current.srcObject=t,e.next=11,b.load();case 11:n=e.sent,p.current=n,s.current.removeAttribute("disabled"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Error accessing media devices.",e.t0);case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(f.jsxs)("div",{className:"py-3 App-header",children:[Object(f.jsx)("h3",{className:"card-header p-3 my-4 w-100 text-center h3",children:"Face detection surveillance camera"}),Object(f.jsx)("div",{children:Object(f.jsx)("video",{style:{width:"550px",height:"350px"},className:"rounded",autoPlay:!0,playsInline:!0,muted:!0,ref:a})}),Object(f.jsxs)("div",{class:"btn-toolbar d-flex justify-content-center p-3",role:"toolbar",children:[Object(f.jsx)("div",{className:"btn-group mr-2",role:"group",children:Object(f.jsx)("button",{className:"btn btn-warning",onClick:function(){j.current=!0,o.current.removeAttribute("disabled"),s.current.setAttribute("disabled",!0),x()},ref:s,children:"Start"})}),Object(f.jsx)("div",{className:"btn-group mr-2",role:"group",children:Object(f.jsx)("button",{className:"btn btn-danger",onClick:function(){j.current=!1,s.current.removeAttribute("disabled"),o.current.setAttribute("disabled",!0),w()},ref:o,children:"Stop"})})]}),Object(f.jsx)("div",{className:"card-header text-center my-5 h3 w-100 ",children:"Video recordings:"}),Object(f.jsx)("div",{className:"row container-fluid m-0 w-100 d-flex justify-content-center",children:n.length?n.map((function(e){return Object(f.jsx)("div",{className:"card m-3 ",style:{backgroundColor:"#282c34"},children:Object(f.jsxs)("div",{className:"card-body p-3 m-0 justify-content-center",children:[Object(f.jsx)("p",{className:"card-dateTitle text-muted small",children:e.dateTitle}),Object(f.jsx)("video",{style:{width:"500px",height:"350px"},className:"rounded d-flex justify-content-center m-auto",poster:"https://www.israel21c.org/wp-content/uploads/2020/04/shutterstock_731158624-768x432.jpg",controls:!0,src:e.href,download:e.href})]})},e.dateTitle)})):null})]})},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,314)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(j,{})}),document.getElementById("root")),p()}},[[313,1,2]]]);
//# sourceMappingURL=main.b51e70d9.chunk.js.map